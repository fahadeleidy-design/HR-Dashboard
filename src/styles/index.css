@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  html {
    @apply antialiased scroll-smooth;
  }

  /* Arabic Font Support */
  html[dir="rtl"] {
    font-family: 'Cairo', 'Noto Sans Arabic', 'Segoe UI', 'Tahoma', 'Arial', sans-serif;
  }

  html[dir="ltr"] {
    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen', 'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue', sans-serif;
  }

  body {
    @apply bg-gray-50 text-gray-900;
  }

  * {
    @apply transition-colors duration-200;
  }

  /* Enhanced RTL Support */
  [dir="rtl"] {
    text-align: right;
  }

  [dir="rtl"] .space-x-reverse > :not([hidden]) ~ :not([hidden]) {
    --tw-space-x-reverse: 1;
  }

  [dir="rtl"] input,
  [dir="rtl"] textarea,
  [dir="rtl"] select {
    text-align: right;
  }

  [dir="rtl"] .text-left {
    text-align: right !important;
  }

  [dir="rtl"] .text-right {
    text-align: left !important;
  }

  /* RTL Margin and Padding Corrections */
  [dir="rtl"] .ml-auto {
    margin-left: 0 !important;
    margin-right: auto !important;
  }

  [dir="rtl"] .mr-auto {
    margin-right: 0 !important;
    margin-left: auto !important;
  }

  [dir="rtl"] .pl-10 {
    padding-left: 0.75rem !important;
    padding-right: 2.5rem !important;
  }

  [dir="rtl"] .pr-10 {
    padding-right: 0.75rem !important;
    padding-left: 2.5rem !important;
  }

  [dir="rtl"] .rounded-l-lg {
    border-top-left-radius: 0 !important;
    border-bottom-left-radius: 0 !important;
    border-top-right-radius: 0.5rem !important;
    border-bottom-right-radius: 0.5rem !important;
  }

  [dir="rtl"] .rounded-r-lg {
    border-top-right-radius: 0 !important;
    border-bottom-right-radius: 0 !important;
    border-top-left-radius: 0.5rem !important;
    border-bottom-left-radius: 0.5rem !important;
  }

  /* RTL Border Radius */
  [dir="rtl"] .border-l {
    border-left: 0 !important;
    border-right: 1px solid !important;
  }

  [dir="rtl"] .border-r {
    border-right: 0 !important;
    border-left: 1px solid !important;
  }

  /* RTL Flex Direction */
  [dir="rtl"] .flex-row {
    flex-direction: row-reverse;
  }

  /* Sidebar Navigation Classes */
  .sidebar-hidden-ltr {
    transform: translateX(-100%);
  }

  .sidebar-hidden-rtl {
    transform: translateX(100%);
  }

  /* On desktop, sidebar is always visible */
  @media (min-width: 1024px) {
    .sidebar-hidden-ltr,
    .sidebar-hidden-rtl {
      transform: translateX(0);
    }
  }

  /* Arabic Number Support */
  [dir="rtl"] input[type="number"],
  [dir="rtl"] input[type="tel"] {
    direction: ltr;
    text-align: left;
  }

  /* Better Arabic Typography */
  [dir="rtl"] h1,
  [dir="rtl"] h2,
  [dir="rtl"] h3,
  [dir="rtl"] h4,
  [dir="rtl"] h5,
  [dir="rtl"] h6 {
    font-weight: 600;
    letter-spacing: 0;
  }

  [dir="rtl"] p,
  [dir="rtl"] span,
  [dir="rtl"] div {
    line-height: 1.8;
  }

  /* Arabic Button Styling */
  [dir="rtl"] button {
    font-weight: 500;
  }

  /* Better Arabic Form Labels */
  [dir="rtl"] label {
    font-weight: 500;
  }
}

@layer components {
  .card {
    @apply bg-white rounded-xl shadow-sm hover:shadow-md transition-all duration-300 border border-gray-100;
  }

  .card-hover {
    @apply transform hover:-translate-y-1 transition-all duration-300;
  }

  .btn-primary {
    @apply inline-flex items-center justify-center px-4 py-2 bg-primary-600 text-white rounded-lg font-medium hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 transition-all duration-200 shadow-sm hover:shadow;
  }

  .btn-secondary {
    @apply inline-flex items-center justify-center px-4 py-2 bg-white text-gray-700 border border-gray-300 rounded-lg font-medium hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 transition-all duration-200;
  }

  .input-field {
    @apply w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent transition-all duration-200 bg-white;
  }

  .stat-card {
    @apply bg-gradient-to-br from-white to-gray-50 rounded-xl shadow-sm hover:shadow-lg transition-all duration-300 border border-gray-100 p-6;
  }

  .page-header {
    @apply mb-8 pb-4 border-b border-gray-200;
  }

  .section-title {
    @apply text-2xl font-bold text-gray-900 mb-6;
  }

  .badge {
    @apply inline-flex items-center px-3 py-1 rounded-full text-xs font-semibold transition-all duration-200;
  }

  .badge-success {
    @apply bg-green-100 text-green-800 hover:bg-green-200;
  }

  .badge-warning {
    @apply bg-yellow-100 text-yellow-800 hover:bg-yellow-200;
  }

  .badge-danger {
    @apply bg-red-100 text-red-800 hover:bg-red-200;
  }

  .badge-info {
    @apply bg-blue-100 text-blue-800 hover:bg-blue-200;
  }

  .modal-overlay {
    @apply fixed inset-0 bg-black bg-opacity-50 backdrop-blur-sm flex items-center justify-center z-50 p-4 overflow-y-auto;
  }

  .modal-content {
    @apply bg-white rounded-2xl shadow-2xl w-full my-8 transform transition-all duration-300;
  }

  .table-container {
    @apply overflow-x-auto rounded-xl border border-gray-200 bg-white shadow-sm;
  }

  .data-table {
    @apply min-w-full divide-y divide-gray-200;
  }

  .data-table thead {
    @apply bg-gray-50;
  }

  .data-table th {
    @apply px-6 py-4 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider;
  }

  [dir="rtl"] .data-table th {
    @apply text-right;
  }

  .data-table td {
    @apply px-6 py-4 whitespace-nowrap text-sm text-gray-900;
  }

  [dir="rtl"] .data-table td {
    @apply text-right;
  }

  .data-table tbody tr {
    @apply hover:bg-gray-50 transition-colors duration-150;
  }

  /* RTL-Specific Component Styles */
  [dir="rtl"] .sidebar {
    left: auto;
    right: 0;
  }

  [dir="rtl"] .sidebar-item {
    flex-direction: row-reverse;
  }

  /* Arabic-Friendly Spacing */
  [dir="rtl"] .space-x-2 > :not([hidden]) ~ :not([hidden]) {
    --tw-space-x-reverse: 1;
    margin-left: calc(0.5rem * var(--tw-space-x-reverse));
    margin-right: calc(0.5rem * calc(1 - var(--tw-space-x-reverse)));
  }

  [dir="rtl"] .space-x-3 > :not([hidden]) ~ :not([hidden]) {
    --tw-space-x-reverse: 1;
    margin-left: calc(0.75rem * var(--tw-space-x-reverse));
    margin-right: calc(0.75rem * calc(1 - var(--tw-space-x-reverse)));
  }

  [dir="rtl"] .space-x-4 > :not([hidden]) ~ :not([hidden]) {
    --tw-space-x-reverse: 1;
    margin-left: calc(1rem * var(--tw-space-x-reverse));
    margin-right: calc(1rem * calc(1 - var(--tw-space-x-reverse)));
  }
}

@layer utilities {
  @keyframes fadeIn {
    from {
      opacity: 0;
      transform: translateY(10px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  .animate-fadeIn {
    animation: fadeIn 0.3s ease-out;
  }

  @keyframes slideIn {
    from {
      opacity: 0;
      transform: translateX(-20px);
    }
    to {
      opacity: 1;
      transform: translateX(0);
    }
  }

  @keyframes slideInRTL {
    from {
      opacity: 0;
      transform: translateX(20px);
    }
    to {
      opacity: 1;
      transform: translateX(0);
    }
  }

  .animate-slideIn {
    animation: slideIn 0.3s ease-out;
  }

  [dir="rtl"] .animate-slideIn {
    animation: slideInRTL 0.3s ease-out;
  }

  /* Utility Classes for Arabic */
  .rtl-flip {
    transform: scaleX(-1);
  }

  [dir="rtl"] .rtl-flip {
    transform: scaleX(1);
  }

  /* Arabic-friendly shadow */
  [dir="rtl"] .shadow-left {
    box-shadow: -4px 0 6px -1px rgba(0, 0, 0, 0.1);
  }

  [dir="ltr"] .shadow-left {
    box-shadow: 4px 0 6px -1px rgba(0, 0, 0, 0.1);
  }
}
